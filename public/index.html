<!DOCTYPE html>
<html>
<head>
	<title>Round Table AirHockey</title>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<canvas id = "gameCanvas"></canvas>
  	<script src="js/jquery-2.1.3.min.js"></script>
	<script src = "js/Puck.js" type="text/javascript"></script>
	<script src = "js/Pusher.js" type="text/javascript"></script>
	<script src = "js/game.js" type="text/javascript"></script>
	<script src = "js/Pencil.js" type="text/javascript"></script>
	<script src="http://localhost:3000/socket.io/socket.io.js"></script>
	<script type="text/javascript">
		var socket = io.connect('http://localhost:3000');
		var pencil = new Pencil();
		
		socket.emit('entrance', {x: 350, y: 500, r: 25});

		$('#gameCanvas').on( "mousemove", function( event ) {
			socket.emit('mouseMove', {x: event.pageX, y: event.pageY});
		});

		socket.on('printPuck', function (data) {
			pencil.clearCanvas();
			pencil.drawTable();
			pencil.drawPuck(data.puck.getAll().x, data.puck.getAll().y, data.puck.getAll().r);
			if(player1 != undefined){
				pencil.drawPusher(data.player1.getAll().x, data.player1.getAll().y, data.player1.getAll().r);
			}
			if(player2 != undefined){
				pencil.drawPusher(data.player2.getAll().x, data.player2.getAll().y, data.player2.getAll().r);
			}
		});

		socket.on('printPlayer', function (data) {
			pencil.clearCanvas();
			pencil.drawTable();
			pencil.drawPuck(data.puck.getAll().x, data.puck.getAll().y, data.puck.getAll().r);
			if(player1 != undefined){
				pencil.drawPusher(data.player1.getAll().x, data.player1.getAll().y, data.player1.getAll().r);
			}
			if(player2 != undefined){
				pencil.drawPusher(data.player2.getAll().x, data.player2.getAll().y, data.player2.getAll().r);
			}
		});

	</script>
</body>
</html>